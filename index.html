<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8439829076102100"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean Bro Morse Trainer</title>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WK3EBW4N73"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WK3EBW4N73');
</script>
    
    <!-- Placeholder for Google Tag -->
    <!-- Google Tag Manager -->
    <!-- <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-XXXXXX');</script> -->
    <!-- End Google Tag Manager -->
    
    <style>
        :root {
            --bg-color: #f0f0f0;
            --text-color: #333333;
            --display-color: #e0e0e0;
            --active-color: #007aff;
            --control-bg: #ffffff;
            --border-color: #d1d1d1;
            --title-bar-height: 40px;
            --title-bar-bg: #f5f5f7;
            --window-radius: 12px;
            --shadow: 0 4px 20px rgba(0,0,0,0.1);
            --button-bg: #007aff;
            --button-hover: #0062cc;
            --logo-width: 120px;
            --header-height: 80px;
        }

        .dark-mode {
            --bg-color: #1e1e1e;
            --text-color: #f0f0f0;
            --display-color: #2d2d2d;
            --active-color: #0a84ff;
            --control-bg: #2d2d2d;
            --border-color: #444;
            --title-bar-bg: #2d2d2d;
            --button-bg: #0a84ff;
            --button-hover: #0062cc;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            position: relative;
            min-height: 100vh;
            padding-bottom: 100px;
            padding-top: calc(var(--header-height) + 20px);
        }

        /* Floating Brand Header */
        .floating-header {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            height: var(--header-height);
            background-color: var(--control-bg);
            border-radius: var(--window-radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 30px;
            z-index: 1000;
            transition: all 0.3s ease;
            animation: floatIn 0.5s ease-out;
        }
        
        @keyframes floatIn {
            from { top: -100px; opacity: 0; }
            to { top: 20px; opacity: 1; }
        }
        
        .floating-header.scrolled {
            top: 10px;
            height: 70px;
        }

        .brand-container {
            display: flex;
            align-items: center;
            gap: 20px;
        }

       .brand-logo {
            height: 60px;
            width: 60px;
            transition: all 0.3s ease;
            object-fit: contain;
        }
        
        .floating-header.scrolled .brand-logo {
            height: 50px;
            width: 50px;
        }

        .brand-text {
            display: flex;
            flex-direction: column;
        }

        .brand-name {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-color);
            letter-spacing: -0.5px;
        }
        
        .floating-header.scrolled .brand-name {
            font-size: 24px;
        }

        .brand-tagline {
            font-size: 16px;
            color: #888;
            font-weight: 400;
            margin-top: 3px;
        }
        
        .floating-header.scrolled .brand-tagline {
            font-size: 14px;
        }

        /* Main Content */
        .mac-window {
            background-color: var(--control-bg);
            border-radius: var(--window-radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .content {
            padding: 20px;
        }

        h2 {
            font-size: 18px;
            color: #888;
            font-weight: 400;
            margin-bottom: 20px;
            text-align: center;
        }

        #display {
            width: 250px;
            height: 250px;
            background-color: var(--display-color);
            margin: 20px auto;
            border-radius: 50%;
            transition: background-color 0.1s;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
            background-color: var(--control-bg);
            padding: 15px;
            border-radius: 8px;
        }

        button {
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            background-color: var(--button-bg);
            color: white;
            border: none;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        button:hover {
            background-color: var(--button-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        button:active {
            transform: translateY(0);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        #progressContainer {
            width: 100%;
            margin: 20px 0;
        }

        #progressBar {
            height: 10px;
            background-color: var(--display-color);
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        #progress {
            width: 0%;
            height: 100%;
            background-color: var(--active-color);
            transition: width 0.3s ease;
        }

        #answerKey {
            padding: 20px;
            background-color: var(--control-bg);
            border-radius: 8px;
            margin-top: 20px;
            display: none;
            border: 1px solid var(--border-color);
        }

        .config-group {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        input[type="number"] {
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            background-color: var(--control-bg);
            color: var(--text-color);
            width: 60px;
        }

        /* Simplified Floating Buttons */
        .floating-buttons {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .floating-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-size: 24px;
            color: white;
        }

        .floating-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        .floating-button.ig { 
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
        }
        .floating-button.yt { 
            background-color: #ff0000;
        }
        .floating-button.web { 
            background-color: #007aff;
        }

        /* Notice Panel */
        .notice-container {
            position: fixed;
            bottom: 30px;
            left: 30px;
            z-index: 100;
        }

        .notice-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #ff9500;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            font-size: 24px;
            transition: all 0.3s ease;
        }

        .notice-btn:hover {
            transform: scale(1.1);
            background-color: #ffaa33;
        }

        .notice-panel {
            position: fixed;
            bottom: -400px;
            left: 0;
            width: 100%;
            background-color: var(--control-bg);
            border-top: 1px solid var(--border-color);
            padding: 25px;
            box-shadow: 0 -5px 25px rgba(0,0,0,0.1);
            transition: bottom 0.5s ease;
            z-index: 99;
            max-height: 400px;
            overflow-y: auto;
        }

        .notice-panel.visible {
            bottom: 0;
        }

        .close-notice {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            color: var(--text-color);
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-notice:hover {
            background-color: rgba(0,0,0,0.1);
        }

        /* Placeholder for Google Ads */
        .ad-container {
            width: 100%;
            margin: 30px 0;
            background-color: var(--display-color);
            border-radius: 8px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            color: #888;
            font-style: italic;
        }

        /* Status and error messages */
        #statusBar {
            padding: 10px;
            text-align: center;
            background-color: rgba(0, 122, 255, 0.1);
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }

        .error {
            background-color: rgba(255, 59, 48, 0.1);
            color: #ff3b30;
        }

        .success {
            background-color: rgba(52, 199, 89, 0.1);
            color: #34c759;
        }

        @media (max-width: 600px) {
            .floating-header {
                width: 90%;
                padding: 0 15px;
            }
            
            .brand-container {
                gap: 12px;
            }
            
            .brand-name {
                font-size: 22px;
            }
            
            .brand-tagline {
                font-size: 14px;
            }
            
            .floating-header.scrolled .brand-name {
                font-size: 20px;
            }
            
            .floating-header.scrolled .brand-tagline {
                font-size: 12px;
            }
            
            #display {
                width: 200px;
                height: 200px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .floating-buttons, .notice-container {
                bottom: 20px;
                right: 20px;
            }
            
            .notice-container {
                left: 20px;
            }
            
            /* Adjust floating buttons for mobile */
            .floating-buttons {
                flex-direction: row;
                gap: 10px;
            }
            
            .floating-button {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) placeholder -->
    <!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
    
    <!-- Floating Brand Header -->
    <div class="floating-header" id="floatingHeader">
        <img src="ocean.png" alt="Ocean Bro Logo" class="brand-logo">
            <div class="brand-logo"></div>
            <div class="brand-text">
                <div class="brand-name">OCEAN BRO</div>
                <div class="brand-tagline">Morse Code Training</div>
            </div>
        </div>
    </div>
    
    <div class="mac-window">
        <div class="content">
            <h2>Say Goodbye to old school practice videos</h2>
            
            <div id="statusBar"></div>
            
            <div class="controls">
                <div class="config-group">
                    <label>
                        Delay (sec):
                        <input type="number" id="delay" min="1" max="10" value="2">
                    </label>
                    <button id="darkModeToggle">üåì Toggle Dark</button>
                </div>
            </div>
            
            <div id="display"></div>
            
            <div id="progressContainer">
                <div id="progressBar"><div id="progress"></div></div>
            </div>
            
            <div class="controls">
                <button id="startBtn">Start Practice</button>
            </div>
            
            <div id="answerKey"></div>
            
            <!-- Google Ads placeholder -->
            <div class="ad-container">
                Google Ad Space (728x90)
            </div>
        </div>
    </div>
    
    <!-- Floating Buttons (Always Visible) -->
    <div class="floating-buttons">
        <a href="https://instagram.com/oceanbro" target="_blank" class="floating-button ig">üì∏</a>
        <a href="https://youtube.com/oceanbro" target="_blank" class="floating-button yt">‚ñ∂Ô∏è</a>
        <a href="https://oceanbro.com" target="_blank" class="floating-button web">üåê</a>
    </div>
    
    <!-- Notice Panel -->
    <div class="notice-container">
        <div class="notice-btn" id="noticeBtn">üì¢</div>
    </div>
    
    <div class="notice-panel" id="noticePanel">
        <button class="close-notice" id="closeNotice">√ó</button>
        <h3>Important Notice</h3>
        <p>Welcome to the Ocean Bro Morse Trainer! This tool is designed to help you master Morse code efficiently.</p>
        <p><strong>New Features:</strong></p>
        <ul>
            <li>Practice with random letters and numbers</li>
            <li>Group practice with 4-character sequences</li>
            <li>Adjustable delay between characters</li>
            <li>Dark mode for comfortable night practice</li>
            <li>Robust error handling for smooth operation</li>
            <li>Simplified floating buttons for easy access</li>
        </ul>
        <p><strong>Tips:</strong></p>
        <ol>
            <li>Start with a longer delay (3-4 seconds) when beginning</li>
            <li>Gradually decrease the delay as you become more familiar</li>
            <li>Use the answer key to verify your understanding</li>
            <li>Practice daily for best results</li>
        </ol>
        <p>For support or feature requests, contact us at support@oceanbro.com</p>
    </div>

    <script>
        const morseCode = {
            'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.',
            'F': '..-.', 'G': '--.', 'H': '....', 'I': '..', 'J': '.---',
            'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.', 'O': '---',
            'P': '.--.', 'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-',
            'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-', 'Y': '-.--',
            'Z': '--..', '0': '-----', '1': '.----', '2': '..---',
            '3': '...--', '4': '....-', '5': '.....', '6': '-....',
            '7': '--...', '8': '---..', '9': '----.'
        };

        let isActive = false;
        let currentTest = [];
        let answerKey = [];
        let testPhase = 0;
        let currentSequenceIndex = 0;
        let flashTimeout = null;
        let testTimeout = null;

        // DOM Elements
        const display = document.getElementById('display');
        const startBtn = document.getElementById('startBtn');
        const delayInput = document.getElementById('delay');
        const progress = document.getElementById('progress');
        const answerKeyDiv = document.getElementById('answerKey');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const noticeBtn = document.getElementById('noticeBtn');
        const noticePanel = document.getElementById('noticePanel');
        const closeNotice = document.getElementById('closeNotice');
        const statusBar = document.getElementById('statusBar');
        const floatingHeader = document.getElementById('floatingHeader');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            document.body.classList.remove('dark-mode');
            updateStatus("Ready to start practice", "success");
            
            // Add scroll effect to floating header
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    floatingHeader.classList.add('scrolled');
                } else {
                    floatingHeader.classList.remove('scrolled');
                }
            });
        });

        // Show status message
        function updateStatus(message, type) {
            statusBar.textContent = message;
            statusBar.className = type;
            statusBar.style.display = "block";
            
            // Auto-hide after 3 seconds
            if(type !== "error") {
                setTimeout(() => {
                    statusBar.style.display = "none";
                }, 3000);
            }
        }

        darkModeToggle.addEventListener('click', () => {
            try {
                document.body.classList.toggle('dark-mode');
                darkModeToggle.textContent = document.body.classList.contains('dark-mode') 
                    ? '‚òÄÔ∏è Light Mode' 
                    : 'üåô Dark Mode';
            } catch (e) {
                updateStatus("Error toggling dark mode: " + e.message, "error");
            }
        });

        startBtn.addEventListener('click', async () => {
            if (isActive) {
                updateStatus("Practice session is already running", "error");
                return;
            }
            
            try {
                isActive = true;
                startBtn.disabled = true;
                answerKeyDiv.style.display = 'none';
                updateStatus("Starting practice session...", "success");
                
                if(testPhase === 0) {
                    currentTest = generateRandomSequence(54);
                    answerKey = currentTest.map(({ char, code }) => `${char} = ${code}`);
                    await runTest(currentTest, "Initial Test");
                    testPhase = 1;
                    startBtn.textContent = "Start Group Practice";
                } else {
                    currentTest = generateWordGroups(7, 4);
                    answerKey = currentTest.flatMap(group => 
                        group.map(({ char, code }) => `${char} = ${code}`)
                    );
                    await runTest(currentTest.flat(), "Group Practice");
                    testPhase = 0;
                    startBtn.textContent = "Start Practice";
                }
                
                updateStatus("Practice session completed successfully!", "success");
            } catch (e) {
                updateStatus("Error during practice session: " + e.message, "error");
                console.error(e);
            } finally {
                isActive = false;
                startBtn.disabled = false;
            }
        });

        // Notice Panel functionality
        noticeBtn.addEventListener('click', () => {
            try {
                noticePanel.classList.add('visible');
            } catch (e) {
                updateStatus("Error opening notice panel: " + e.message, "error");
            }
        });

        closeNotice.addEventListener('click', () => {
            try {
                noticePanel.classList.remove('visible');
            } catch (e) {
                updateStatus("Error closing notice panel: " + e.message, "error");
            }
        });

        // Close notice when clicking outside
        document.addEventListener('click', (e) => {
            try {
                if (!noticePanel.contains(e.target) && e.target !== noticeBtn) {
                    noticePanel.classList.remove('visible');
                }
            } catch (e) {
                // Ignore errors that might occur during DOM manipulation
            }
        });

        async function runTest(sequence, testName) {
            try {
                // Clear any existing timeouts
                clearTimeout(flashTimeout);
                clearTimeout(testTimeout);
                
                progress.style.width = '0%';
                const totalItems = sequence.length;
                currentSequenceIndex = 0;
                
                for (currentSequenceIndex = 0; currentSequenceIndex < totalItems; currentSequenceIndex++) {
                    const item = sequence[currentSequenceIndex];
                    await flashSequence(item.code || item);
                    updateProgress((currentSequenceIndex + 1) / totalItems * 100);
                    await wait(delayInput.value * 1000);
                }
                
                showAnswerKey(testName);
            } catch (e) {
                updateStatus("Error in test sequence: " + e.message, "error");
                throw e;
            }
        }

        function generateRandomSequence(length) {
            try {
                const chars = Object.keys(morseCode);
                return Array.from({ length }, () => {
                    const char = chars[Math.floor(Math.random() * chars.length)];
                    return { char, code: morseCode[char] };
                });
            } catch (e) {
                updateStatus("Error generating sequence: " + e.message, "error");
                return Array.from({ length }, () => ({ char: "A", code: ".-" }));
            }
        }

        function generateWordGroups(groups, wordsPerGroup) {
            try {
                const words = Object.keys(morseCode).filter(k => k.length === 1);
                return Array.from({ length: groups }, () => 
                    Array.from({ length: wordsPerGroup }, () => {
                        const chars = Array.from({ length: 4 }, () => 
                            words[Math.floor(Math.random() * words.length)]
                        ).join('');
                        return {
                            char: chars,
                            code: chars.split('').map(c => morseCode[c]).join(' ')
                        };
                    })
                );
            } catch (e) {
                updateStatus("Error generating word groups: " + e.message, "error");
                return [[{ char: "ABCD", code: ".- -... -.-. -.." }]];
            }
        }

        async function flashSequence(code) {
            try {
                const sequence = typeof code === 'string' ? code.split(' ') : [code];
                
                for (const symbol of sequence) {
                    for (const char of symbol) {
                        display.style.backgroundColor = 'var(--active-color)';
                        await wait(char === '.' ? 200 : 600);
                        display.style.backgroundColor = 'var(--display-color)';
                        await wait(200);
                    }
                    await wait(300);
                }
            } catch (e) {
                updateStatus("Error in flash sequence: " + e.message, "error");
                throw e;
            }
        }

        function updateProgress(percentage) {
            try {
                progress.style.width = percentage + '%';
            } catch (e) {
                updateStatus("Error updating progress: " + e.message, "error");
            }
        }

        function showAnswerKey(testName) {
            try {
                const content = testPhase === 0 ?
                    answerKey.join('<br>') :
                    currentTest.map((group, i) => 
                        `<strong>Group ${i+1}:</strong><br>${group.map(w => `${w.char} = ${w.code}`).join('<br>')}`
                    ).join('<br><br>');
                
                answerKeyDiv.innerHTML = `<h3>${testName} Answer Key:</h3><div style="line-height: 1.8;">${content}</div>`;
                answerKeyDiv.style.display = 'block';
            } catch (e) {
                updateStatus("Error showing answer key: " + e.message, "error");
            }
        }

        function wait(ms) {
            return new Promise(resolve => {
                testTimeout = setTimeout(resolve, ms);
            });
        }
        
        // Handle page unload to clear timeouts
        window.addEventListener('beforeunload', () => {
            clearTimeout(flashTimeout);
            clearTimeout(testTimeout);
        });
    </script>
    
    <!-- Placeholder for Google Ads script -->
    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script> -->
</body>
</html>
